<!doctype html>
<html lang="en">
<head><title>UseArraysAsList</title></head>
<body>
<h2><a name="UseArraysAsList"></a>UseArraysAsList</h2>

<p>The java.util.Arrays class has a &#x201c;asList&#x201d; method that should be used when you want to create a new List from an array of objects. It is faster than executing a loop to copy all the elements of the array one by one.</p>

<div>
<pre>
   
//Statement[
    (ForStatement) and (ForStatement//VariableInitializer//Literal[@IntLiteral='true' and @Image='0']) and (count(.//IfStatement)=0)
   ]
   //StatementExpression[
    PrimaryExpression/PrimaryPrefix/Name[
     substring-before(@Image,'.add') = ancestor::MethodDeclaration//LocalVariableDeclaration[
      ./Type//ClassOrInterfaceType[
       @Image = 'Collection' or 
       @Image = 'List' or @Image='ArrayList'
      ]
     ]
     /VariableDeclarator/VariableDeclaratorId[
      count(..//AllocationExpression/ClassOrInterfaceType[
       @Image=&quot;ArrayList&quot;
      ]
      )=1
     ]/@Image
    ]
   and
   PrimaryExpression/PrimarySuffix/Arguments/ArgumentList/Expression/PrimaryExpression/PrimaryPrefix/Name
   [
     @Image = ancestor::MethodDeclaration//LocalVariableDeclaration[@Array=&quot;true&quot;]/VariableDeclarator/VariableDeclaratorId/@Image
     or
     @Image = ancestor::MethodDeclaration//FormalParameter/VariableDeclaratorId/@Image
   ]
   /../..[count(.//PrimarySuffix)
   =1]/PrimarySuffix/Expression/PrimaryExpression/PrimaryPrefix
   /Name
   ]
   
</pre></div>
<p>Example(s):</p>

<div>
<pre>
   
public class Test {
  public void foo(Integer[] ints) {
    // could just use Arrays.asList(ints)
     List l= new ArrayList(10);
     for (int i=0; i&lt; 100; i++) {
       l.add(ints[i]);
     }
     for (int i=0; i&lt; 100; i++) {
       l.add(a[i].toString()); // won't trigger the rule
     }
  }
}
   
</pre></div>

</body>
</html>